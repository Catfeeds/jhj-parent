function isLogin(){return"undefined"!=typeof localStorage.user_id&&""!=localStorage.user_id}function toolBarHref(a,b){var c=$$("#toolbar-index"),d=$$("#toolbar-order"),e=$$("#toolbar-am"),f=$$("#toolbar-mine");if("toolbar-index"==b&&(c.addClass("active"),c.css("color","#FB571E"),d.removeClass("active"),d.css("color","#FFF"),e.removeClass("active"),e.css("color","#FFF"),f.removeClass("active"),f.css("color","#FFF")),"toolbar-order"==b&&(d.addClass("active"),d.css("color","#FB571E"),c.removeClass("active"),c.css("color","#FFF"),e.removeClass("active"),e.css("color","#FFF"),f.removeClass("active"),f.css("color","#FFF")),"toolbar-am"==b){if(e.addClass("active"),e.css("color","#FB571E"),c.removeClass("active"),c.css("color","#FFF"),d.removeClass("active"),d.css("color","#FFF"),f.removeClass("active"),f.css("color","#FFF"),null==localStorage.getItem("user_id"))return void mainView.router.loadPage("login.html");if(null==localStorage.getItem("am_id")||null==localStorage.getItem("am_mobile"))return void myApp.confirm("您还没有添加地址，点击确定前往添加地址立刻获得家庭助理，点击返回留在此页","",function(){mainView.router.loadPage("user/mine-add-addr.html?addr_id=0&return_url=user/user-am-detail.html")})}return"toolbar-mine"==b&&(f.addClass("active"),f.css("color","#FB571E"),d.removeClass("active"),d.css("color","#FFF"),e.removeClass("active"),e.css("color","#FFF"),c.removeClass("active"),c.css("color","#FFF"),null==localStorage.getItem("user_id"))?void mainView.router.loadPage("login.html"):void mainView.router.loadPage(a)}function serviceTypeList(){$$.ajax({type:"GET",url:siteAPIPath+"dict/get_serviceType.json?",dataType:"json",cache:!0,statusCode:{200:ajaxServiceTypeListSuccess,400:ajaxError,500:ajaxError}})}function serviceTypeAddonsList(){$$.ajax({type:"GET",url:siteAPIPath+"dict/get_service_addons_type.json?",dataType:"json",cache:!0,statusCode:{200:ajaxServiceTypeAddonsListSuccess,400:ajaxError,500:ajaxError}})}function ajaxServiceTypeListSuccess(a,b,c){var d=JSON.parse(a.response);if("999"==d.status)return void myApp.alert(d.msg);var e=JSON.stringify(d.data);localStorage.setItem("service_type_list",e)}function ajaxServiceTypeAddonsListSuccess(a,b,c){var d=JSON.parse(a.response);if("999"==d.status)return void myApp.alert(d.msg);var e=JSON.stringify(d.data);localStorage.setItem("service_type_addons_list",e)}function getServiceAddonName(a){var b=JSON.parse(localStorage.getItem("service_type_addons_list")),c="";return $$.each(b,function(b,d){d.service_addon_id==a&&(c=d.name)}),c}function getServiceAddonPrice(a){var b=JSON.parse(localStorage.getItem("service_type_addons_list")),c="";return $$.each(b,function(b,d){d.service_addon_id==a&&(c=d.price)}),c}function getServiceAddonDefaultNum(a){var b=JSON.parse(localStorage.getItem("service_type_addons_list")),c="";return $$.each(b,function(b,d){d.service_addon_id==a&&(c=d.default_num)}),c}function getAstroName(a){var b="";switch(a){case 0:b="魔羯座";break;case 1:b="水瓶座";break;case 2:b="双鱼座";break;case 3:b="白羊座";break;case 4:b="金牛座";break;case 5:b="双子座";break;case 6:b="巨蟹座";break;case 7:b="狮子座";break;case 8:b="处女座";break;case 9:b="天秤座";break;case 10:b="天蝎座";break;case 11:b="射手座";break;default:b=""}return b}function getAm(){var a=localStorage.getItem("user_id");return void 0==a||""==a?!1:void $$.ajax({type:"get",url:siteAPIPath+"user/user_get_am_id.json?user_id="+a,cache:!0,success:function(a,b,c){var d=JSON.parse(a),e=d.data;if("undefiend"!=typeof e&&""!=e&&null!=e){var f=e.am_id,g=e.am_mobile;localStorage.setItem("am_id",f),localStorage.setItem("am_mobile",g)}}})}function isNum(a){return null!=a&&a.length>0&&0==isNaN(a)?!0:!1}function replaceParamVal(url,paramName,replaceWith){var re=eval("/("+paramName+"=)([^&]*)/gi"),nUrl=url.replace(re,paramName+"="+replaceWith);return nUrl}function delChinese(a){var b=/[\u4E00-\u9FA5]/g,c=a.replace(b,"");return c}function delSomeString(a){var b=a.substr(1,a.length);return b}function isPhone(a){var b=RegExp(/^(0|86|17951)?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/).test(a);return b?!0:!1}function isEmail(a){var b=RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(a);return b?!0:!1}function dateSelect(){var a=[],b=0,c=moment().hour();c>=16&&(b=1);for(var d=b;14>d;d++){var e=moment().add(d,"days").format("YYYY-MM-DD");a.push(e)}for(var f=[],d=6;20>d;d++){var g=moment({hour:d}).format("HH");f.push(g)}var h=[10,11,12,13,14,15,16,17,18,19],i=[11,12,13,14,15,16],j=[17,18,19],k=[6,7,8,9,10,11,12,13,14,15,16,17,18,19],l=[10,11,12,13,14,15,16,17,18,19];if(7>c)var m={serviceDates:a,serviceHours:h,serviceMins:["00","30"]};if(c>6&&12>=c)var m={serviceDates:a,serviceHours:i,serviceMins:["00","30"]};if(c>12&&15>=c)var m={serviceDates:a,serviceHours:j,serviceMins:["00","30"]};if(c>=16&&19>=c)var m={serviceDates:a,serviceHours:k,serviceMins:["00","30"]};if(c>19&&23>=c)var m={serviceDates:a,serviceHours:l,serviceMins:["00","30"]};$$("#serviceDate").val(m.serviceDates[0]+"  "+m.serviceHours[0]+":"+m.serviceMins[0]);var n=!0,o=!0,p=!0,q=!0,r=!0,s=!0;myApp.picker({input:"#serviceDate",toolbarCloseText:"确认",onChange:function(a,b,d){if(19==b[1]&&a.cols[3].setValue("00"),moment(b[0]).fromNow().indexOf("前")>0){if(!s)return;if(r&&s){if(7>c&&a.cols[1].replaceValues(h),c>=7&&12>=c)if(c<i[0]){var e=i.indexOf(c+4);a.cols[1].replaceValues(i.slice(e))}else{var e=i.indexOf(c);a.cols[1].replaceValues(i.slice(e+4))}if(c>12&&15>=c){var e=j.indexOf(c+4);a.cols[1].replaceValues(j.slice(e))}return c>15&&19>=c&&a.cols[1].replaceValues(k),c>19&&23>=c&&a.cols[1].replaceValues(l),void(r=!1)}for(;s&&!r&&!q;){if(7>c&&a.cols[1].replaceValues(h),c>=7&&12>=c)if(c<i[0]){var e=i.indexOf(c+4);a.cols[1].replaceValues(i.slice(e))}else{var e=i.indexOf(c);a.cols[1].replaceValues(i.slice(e+4))}if(c>12&&15>=c){var e=j.indexOf(c+4);a.cols[1].replaceValues(j.slice(e))}c>15&&19>=c&&a.cols[1].replaceValues(k),c>19&&23>=c&&a.cols[1].replaceValues(l),q=!0}}var f=moment(moment(b[0])).format("YYYY-MM-DD"),g=moment(f).toNow();if(g.indexOf("前")>0&&16>c)for(p&&q&&(a.cols[1].replaceValues(k),p=!0,q=!1);!p&&!q;)a.cols[1].replaceValues(k),p=!1,q=!0;if(moment(b[0]).toNow().indexOf("天")>0){for(;n&&o;)a.cols[1].replaceValues(k),n=!1;for(;!n&&!o;)a.cols[1].replaceValues(k),n=!0,o=!1}else{if(7>c){for(;o&&!n&&q;)a.cols[1].replaceValues(h),o=!1;for(;!o&&n&&q;)a.cols[1].replaceValues(h),o=!0}if(c>6&&12>=c){for(;o&&!n&&q;){if(c<i[0]){var e=i.indexOf(c+4);a.cols[1].replaceValues(i.slice(e))}else{var e=i.indexOf(c);a.cols[1].replaceValues(i.slice(e+4))}o=!1}for(;!o&&n&&q;){if(c<i[0]){var e=i.indexOf(c+4);a.cols[1].replaceValues(i.slice(e))}else{var e=i.indexOf(c);a.cols[1].replaceValues(i.slice(e+4))}o=!0}}if(c>12&&15>=c){for(;o&&!n&&q;){var e=j.indexOf(c+4);a.cols[1].replaceValues(j.slice(e)),o=!1}for(;!o&&n&&q;){var e=j.indexOf(c+4);a.cols[1].replaceValues(j.slice(e)),o=!0}}if(c>=16&&19>=c){for(;o&&!n&&q;)a.cols[1].replaceValues(k),o=!1;for(;!o&&n&&q;)a.cols[1].replaceValues(k),o=!0}if(c>19&&23>=c){for(;o&&!n&&q;)a.cols[1].replaceValues(l),o=!1;for(;!o&&n&&q;)a.cols[1].replaceValues(l),o=!0}}},formatValue:function(a,b,c){return b[0]+"  "+b[1]+":"+b[2]},cols:[{values:m.serviceDates,width:160},{values:m.serviceHours},{divider:!0,content:":"},{values:m.serviceMins}]})}var host=window.location.host,appName="jhj-app",localUrl="http://"+host,siteAPIPath=localUrl+"/"+appName+"/app/",siteApp="u",sitePath=localUrl+"/"+siteApp,userLoggedIn=!1,myApp=new Framework7({precompileTemplates:!0,template7Pages:!0,pushState:!0,cache:!1,modalTitle:"提示",modalButtonOk:"确定",modalButtonCancel:"返回",template7Data:{},material:!0,allowDuplicateUrls:!0,domCache:!0,onAjaxStart:function(a){myApp.showIndicator()},onAjaxComplete:function(a){myApp.hideIndicator()},preroute:function(a,b){return(isLogin()||"order/order-form-zhongdiangong.html"!=b.url)&&(isLogin()||"order/order-list-shendubaojiezl.html"!=b.url)&&(isLogin()||"order/order-am-faqiyuyue.html?service_type=3"!=b.url)&&(isLogin()||"user/mine.html"!=b.url)&&(isLogin()||"user/user-am-detail.html"!=b.url)&&(isLogin()||"order/order-hour-now-list.html"!=b.url)&&(isLogin()||"order/order-am-faqiyuyue.html?service_type=4"!=b.url)&&(isLogin()||"order/order-am-faqiyuyue.html?service_type=5"!=b.url)&&(isLogin()||"order/order-am-faqiyuyue.html?service_type=6"!=b.url)&&(isLogin()||"order/order-am-faqiyuyue.html?service_type=7"!=b.url)&&(isLogin()||"user/charge/mine-charge-list.html"!=b.url)&&(isLogin()||"huodong-detail.html"!=b.url)&&(isLogin()||"huodong-list.html"!=b.url)?void 0:(a.router.loadPage("login.html"),!1)}}),$$=jQuery=Dom7,mainView=myApp.addView(".view-main",{dynamicNavbar:!0}),ajaxError=function(a,b,c){myApp.hideIndicator(),myApp.alert("网络繁忙,请稍后再试.")};null==localStorage.getItem("service_type_list")&&serviceTypeList(),null==localStorage.getItem("service_type_addons_list")&&serviceTypeAddonsList(),(null==localStorage.getItem("am_id")||null==localStorage.getItem("am_mobile"))&&getAm(),window.onhashchange=function(){$$(".close-picker").click()};